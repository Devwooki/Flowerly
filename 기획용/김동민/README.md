# 10-16
## 트리거

- 귀신 출현 조건
    - 일정 걸음 수 이상 또는 걸음 수의 숫자 조합을 만족시 귀신 출현
    - 특정 시간이 되면 그 시간에만 뜨는 귀신 출현
    
    - 특정 지역 안에서만 뜨는 귀신 출현
    - 해당 지역의 날씨에 따른 조건 만족시 귀신 출현
- 레벨과 응급처지 정보에  따른 복잡도를 추가해야 하나??
    - 얼마나 복잡하게 설정해야함?
    - 처음에는 튜토리얼 방식으로 간단한 부목, 붕대감기, 세균감염 예방 같은 기술을 배우고 해당 기술을 습득해야만 그 기술을 다른 귀신의 상황에 적용할 수 있음
        - 예를 들면 간단한 부목을 만드는 기술을 어떤 귀신을 통해 습득
        - 이 귀신을 만나야지만 부목을 쓰는 응급처치술 사용 가능함
        - 이 기술이 없다면 부목이 필요한 응급처치술이 비활성화되어 사용자에게 이러한 기술이 있지만 현재의 너는 이 기술을 사용할 수 없어라는 UI를 표시
        - 습득방법 같은 UI를 통해 습득 방법을 제공함
    - 어제의 나는 부목 스킬이 없어서 그 귀신을 치료해주지 못했지만 오늘 습득하게 되어 그 귀신을 만났을 때 조치를 할 수 있는 다양한 상황을 연출
- 가속도계 및 자이로스코프를 활용한 귀신 출현 또는 응급처지 기술
    - 화면을 위아래로 흔들거나 하는 방식을 활용해 붕대를 감싼다거나?
    - 화면을 뒤집은 상태여야 뜨는 귀신 (뭐 팔이 돌아갔다던가…)
- ~~친구와 협력하는 컨텐츠도 가능??~~
- 이야기의 만족도를 설정
    - A라는 귀신을 만나고 그 귀신 카드를 수집한 상태여야만 B라는 귀신이 출현
- 내가 갖고 있는 물품이 뭐냐에 따라 각각 다른 상황을 연출
    - 얼음이 필요하다면 얼음을 얻을 수 있는 상황을 연출??
- 위의 모든 조건들을 복합적으로 섞어 다양한 조건을 만족할 때 귀신이 출현

## 기능 추가

- gps, map 기능 넣을꺼임?
- 소집품, 사용 가능 응급처치 기술 같은 status창 넣을꺼임?
- 귀신 카드
- 게임 외에 응급처치 방법과 가이드를 간략하게 설명해주는 화면이나 요약 카드형식 등 으로 사용자에게 다양하게 지식들을 습득하도록 유도
- 보상 제도는 어떻게? 많이 습득하면 그래서?
- 사이드 기능으로 퀴즈 및 시험을 통해 지식을 반복적으로 제공하고 사용자가 실제 상활에서 조치를 할 수 있도록 기회를 제공하고 학습을 강화
- 응급처치 상황에는 알맞는 조치를 취할 수 있도록 정확한 정황 정보( 출혈, 화상, 골절, 세균 감염 여부 등)를 제공해야만 함
- 잘못된 조치를 취할 경우의 패널티와 올바른 방법을 어떠한 방법으로 제공할 것인가
- 감정적인 요소가 들어갈 것인가?
    - 환자가 내가 응급처치를 한다고 시체마냥 가만히 있는다는 보장이 어디 있음? 발버둥을 칠 수도 있고 소리를 지를 수도 있는거 아닌가?(어린아이 같은 경우) 그런 상황에는 어떻게 해야할지(그런 상황에 놓인 부모 같은 사람의 입장이라면 어떤 식으로 아이를 진정시키고 조치를 취해야 할지)도 제공해야 함?
- 귀신에 따른 각기 다른 간단한 스토리를 우리가 만들어서 다양한 수집 욕구를 만들 것인가?
    - 카드 자체는 같지만 조금씩 스토리가 다르다던가
    - 이름은 같지만 수집하기 어려운 조금 특별한 귀신이라던가 (포켓몬에 같은 포켓몬이더라도 색이 다른 포켓몬이 희귀한 것 처럼)
    - 각 귀신은 귀신 자체의 능력치를 갖고 있나?
        - 이러면 수집을 해도 A라는 귀신 카드지만 모두 다른 스텟을 갖고 있는 A라는 귀신임

# 10-17
## 기능적 요구사항

- 생성 및 주문
    - 주문 시작 전 필요사항
        - 사용자는 검색할 지역의 주소를 입력한다.
        - 주소 입력 후 꽃다발 생성으로 넘어간다.
    - 꽃다발 생성하기
        - 사용자는 상황, 대상, 색상 3가지를  제시 해준 사항 중  고른다
        - 꽃다발에 사용할 꽃의 종류를 선택한다.
        - 선택된 꽃을 기준으로 생성형 AI에게 꽃다발 의뢰를 한다.
        - 마음에 들지 않는다면 꽃을 재선택하거나 선택된 꽃으로 다시 재생성 한다.
        - AI는 4가지의 추천 꽃다발을 보여준다.
        - 사용자는 4가지중 1택을 한다.
        - 선택된 꽃을 갖고 의뢰하기로 넘어간다
    - 의뢰글 남기기
        - 선택된 꽃과 함께 사용자가 역경매를 할 간단 내용과 상세 주문 요청사항 같은 내용을 기입한다.
        - 판매자는 판매하려는 꽃의 예시 상품(완제품 OR 사진)을 의뢰글에 남긴다.
    - 사용자의 꽃집과 꽃다발 선택하기
        - 사용자는 꽃집에서 제시한 꽃의 디자인, 가격, 꽃집의 위치를 고려하여 최종 선택을 한다.
        - 사용자와 꽃집을 연결해준다.
    - 사용자와 꽃집의 접촉
        - 꽃집과 연결된 사용자는 최종 사용자의 요구사항이나 꽃다발의 디테일한 수정부분, 요청사항들을 합의한다.
        - 두 사용자의 동의가 확인되면 결제창으로 넘어간다.
    - 결제하기 **(까지 가능인가?) - 이현욱하고싶어요**
        - 카카오와 연동하여 꽃집에게 금액을 전송한다.
        - 주문 완료
- 사용자
    - 마이 페이지
- 판매자
    - 매장 관리
- 최신 트렌드 꽃
    
    혹은 계절에 따른 꽃 추천
    
- 공유하기?
- 리뷰 및 신고
- 꽃과 꽃말

## 비기능적 요구사항

**[사용자 입력값]**

- 색상 종류
    - 빨강, 분홍, 주황, 노랑, 파랑, 보라, 흰색
- 이벤트 상황 종류
    - 생일, 입학식/졸업식, 기념일, 기타
- 이벤트 대상 종류
    - 연인, 친구, 부모님, 형제/자매, 동료, 기타

**[꽃다발 생성]**

- 색상, 상황, 대상에 맞는 꽃말을 가진 꽃을 DB에서 조회하여 사용자에게 보여준다. (보여주는 개수는 최대 20개)
- 꽃다발을 만들기 위해 사용자가 선택할 수 있는 꽃의 개수는 최대 3개

**[역경매]**

- 사용자 입력 주소 기준 5km 이내에 있는 꽃집만 역경매에 참여할 수 있다.
- 역경매에 올릴 때 사용자는 제한 시간을 설정할 수 있다. (1시간~2일)
- 

## DB

[꽃 테이블] 

- 판매량이라는 가중치에 따라 선별(https://flower.at.or.kr/yfmc/)
- 꽃 이름, 색상 꽃말, 이미지 전처리 필요
    - 색상과 꽃말이 다른 꽃의 경우 별도의 컬럼으로 지정
        - EX) 파란장비 노란장미, 수국 등
- 데이터 전처리 후 생성형 한테 넘기기 (꽃말, 이미지 등)

[꽃말 테이블] 

- 1:N
- Enum..? (축복, 사랑, 영원 등일 것 같아서..)

# 10-18
소비자,판매자	로그인	카카오 로그인	- REST API를 이용한 카카오 로그인	1. 로그인 버튼을 누른다.
2. 카카오 로그인 페이지로 이동한다.
3. 사용자가 로그인하면 인가코드를 발급받는다.
3-1. 만일 로그인 취소를 누르면 다시 로그인 페이지를 보여준다.
4. 인가코드와 redirect uri를 server로 전달한다.




10. 서버에서 발급받은 토큰을 저장한다.
11. 로그인하면 main page로 이동
11-1. 탈퇴한 회원 로그인시 탈퇴한 회원임을 고지	5. 클라이언트에서 받은 인가코드와 redirect uri를 카카오 서버로 보내 토큰을 발급받는다.
5-1. 토큰을 발급 받지 못했으면 실패 코드를 클라이언트로 보낸다.
6. 서버로 토큰을 보내 사용자 정보를 받는다.
7. 카카오에서 받은 사용자 정보를 이용하여 DB에서 사용자를 검색한다.
7-1. 회원 상태가 false 이면 탈퇴한 회원을 의미하므로, 클라이언트에게 삭제한 회원임을 알린다.
8. 사용자 정보를 이용하여 access-token과 refresh-token을 발급받는다.
9. 발급받은 토큰을 클라이언트에게 전달한다.
판매자	회원가입	판매자 회원가입	- 판매자 역할의 사용자가 회원가입한다.
- 회원가입 시 가게 정보를 입력한다. 
  - 가게 이름, 주소, 소개글	1~4 로그인과 동일



10. 서버에서 발급받은 토큰을 저장한다.
11. 로그인하면 가게 정보 입력 페이지로 이동한다.
12. 정보를 입력 후 완료 버튼을 누르면 메인 페이지로 이동한다.	5~7 로그인과 동일
7-1. 만일 DB에 카카오에서 받은 사용자 정보에 해당하는 사용자 정보가 없다면 회원가입을 한 후, 생성한 사용자를 반환한다.
8. 사용자 정보를 이용하여 access-token과 refresh-token을 발급받는다.
9. 발급받은 토큰을 클라이언트에게 전달한다.
소비자	회원가입	소비자 회원가입	- 소비자 역할의 사용자가 회원가입한다.
- 회원가입 시 사용자 정보를 입력한다.
  - 닉네임, (전화번호)	1~4 로그인과 동일



10. 서버에서 발급받은 토큰을 저장한다.
11. 로그인하면 사용자 정보 입력 페이지로 이동한다.
12. 정보를 입력 후 완료 버튼을 누르면 메인 페이지로 이동한다.	5~7 로그인과 동일
7-1. 만일 DB에 카카오에서 받은 사용자 정보에 해당하는 사용자 정보가 없다면 회원가입을 한 후, 생성한 사용자를 반환한다.
8. 사용자 정보를 이용하여 access-token과 refresh-token을 발급받는다.
9. 발급받은 토큰을 클라이언트에게 전달한다.
소비자,판매자	로그아웃	로그아웃	- 시스템에서 로그아웃한다.	1. 로그아웃 버튼을 누른다.	
소비자,판매자	마이페이지	과거 거래 내역	- 주문이 완료된 내역을 확인한다.	1. 과거 거래 내역 탭을 클릭한다.

3. 전달 받은 데이터를 표시한다.	
2. 과거 거래 내역에 대한 데이터를 클라이언트에게 전달한다.
판매자	마이페이지	주문관리	- 주문 정보를 관리한다.	1. 주문 관리 탭을 클릭한다.
2. 입찰/진행중/완료 탭을 클릭해 기능에 맞는 화면을 출력한다.	1. 요청 URL에 따른 정보를 반환해준다.
판매자	마이페이지	꽃 가게 정보	- 가게 정보를 관리한다	1. 정보관리 버튼을 클릭한다.
2. 사업자 번호, 상호명, 연락처 등을 수정한다.
3. 수정 버튼을 클릭하면 정보가 업데이트 된다.	1. 요청 URL에 따라 가게 정보를 수정한다
소비자,판매자	마이페이지	유저 정보 관리	- 유저 정보를 관리한다	1. 정보관리 버튼을 클릭한다.
2. 사업자 번호, 상호명, 연락처 등을 수정한다.
3. 수정 버튼을 클릭하면 정보가 업데이트 된다.	1. 요청 URL에 따라 유저 정보를 수정한다.
소비자	진행 상황	주문 진행 정보 확인	- 경매 진행 상황을 확인한다.
- 주문 진행 상황을 확인한다.	1. 진행 상황 버튼을 누른다.

3. 전달 받은 데이터를 표시한다.	
2. 경매와 주문 진행 상황에 대한 데이터를 클라이언트에게 전달한다.
판매자	진행 상황	주문 진행 정보 확인 및 수정	- 경매 진행 상황을 확인 및 수정한다.
- 주문 진행 상황을 확인 및 수정한다.	1~3 소비자 진행 정보 확인과 동일
4. 주문 진행의 수정 버튼을 클릭한다.

6. 전달 받은 진행 단계로 수정한다.	1~3 소비자 진행 정보 확인과 동일

5. 주문 진행 단계를 다음 단계로 바꾸고 클라이언트에게 전달한다.
소비자	진행 상황	진행 상황 중 알림	- 진행 상황 중 다음과 같은 경우에 카톡으로 알림을 준다.
1) 경매에 새로운 판매자가 참여
2) 경매에 설정한 제한 시간 종료
3) 제작 진행 중 제작중, 배송 시작, 배송 중, 배송 완료 시점		1. 해당 이벤트 발생 시 카카오 API 호출
판매자	진행 상황	진행 상황 중 알림	- 진행 상황 중 다음과 같은 경우에 카톡으로 알림을 준다.
1) 경매가 입찰됨		소비자 진행 상황 중 알림 과 동일
소비자	꽃 생성	꽃다발 생성	- 사용자의 요청에 맞는 꽃다발을 생성한다.	1. 사용자는 원하는 색상, 이벤트 상황, 이벤트 대상을 선택하고 다음 버튼을 누른다.

3. 꽃 사진, 이름, 꽃말이 표시된 꽃 목록을 확인하고, 원하는 꽃을 최대 3개 선택한다. 
3-1. 건너뛰기 버튼을 누르면 꽃을 선택하지 않고 다음 페이지로 이동한다.

5. 4개의 이미지 중 마음에 드는 이미지를 선택한다.
5-1. 마음에 드는 이미지가 없다면 꽃을 다시 선택하거나 기존 꽃으로 이미지만 다시 생성한다.	
2. 입력값에 적합한 꽃말을 가진 꽃을 DB에서 조회한다.


4. 선택된 꽃으로 생성형 AI를 통해 꽃다발 이미지 4개를 생성한다.
4-1. 사용자가 건너뛰기 버튼을 누른 경우 꽃은 랜덤으로 꽃을 입력한다.
소비자	꽃 주문	꽃다발 주문	- 꽃 생성에서 선택한 꽃다발로 의뢰 글을 작성하여 역경매를 신청한다.	1. 의뢰 글을 작성 후 의뢰하기 버튼을 눌러 역경매를 신청한다.
  - 선택한 꽃다발 이미지
  - 꽃다발에 들어간 꽃 목록
  - 이벤트 상황, 대상?
  - 요청 사항	
2. 의뢰 내용을 DB에 저장한다.
소비자	역경매	꽃가게 선택	- 경매에 참여한 꽃 가게 중 주문할 가게를 선택한다. 	1. 경매 목록 탭에 들어간다.

3. 참여한 꽃 가게 목록을 확인한다.
4. 주문할 가게를 선택한다. 	
2. 경매에 참여한 꽃 가게 데이터를 클라이언트에 전달한다.
판매자	역경매	역경매 참여	- 소비자가 올린 글을 보고 경매에 참여한다.	1. 경매 목록 탭에 들어간다.

3. 참여할 수 있는 역경매 목록을 확인한다.
4. 참여할 역경매를 선택한다.
5. 역경매 신청서를 작성한다. 

7. 참여할 수 있는 역경매 목록을 확인한다.	
2. 소비자 가 신청한 역경매 목록 데이터를 클라이언트에 전달한다.


6. 전달받은 역경매 신청서를 저장한다.
소비자,판매자	채팅	채팅	- 입찰 정보를 바탕으로 유저와 채팅을 통해 상호작용한다	1. 입찰 목록에서 채팅 버튼을 클릭한다.
2. 채팅창으로 이동한다.
3. 꽃가게와 채팅을 통해 견적을 완성한다.
3-1. 채팅시 텍스트 및 이미지를 전송할 수 있다
4. 채팅 로그는 사라지지 않고 영구 보존한다.	사용 기술 : WebSocket, STOMP
DB : MongoDB
1. 
소비자,판매자	채팅	주문 폼	- 주문 폼으로 판매자와 소비자가 형식적인 채팅을 주고 받는다.	1. 판매자가 주문 폼 생성 버튼을 누른다.

3. 소비자가 주문 폼 형식에 정보를 작성한다.
	
2. 주문 폼 형식 메세지를 소비자에게 보낸다.

4. 받은 주문 폼 정보 메세지를 보낸다.
소비자,판매자	채팅	주문 결제	- 카카오페이가 연결된 결제 메세지를 전송한다.	1. 판매자가 결제 생성 버튼을 누른다.

3. 결제 금액을 입력한 후 버튼을 누른다.	
2. 결제 생성 메세지 폼을 판매자에게 보낸다.
4. 소비자에게 금액과 카카오페이 링크 버튼이 포함된 메세지를 보낸다.
소비자	꽃 가게	꽃 가게 정보 확인	- 꽃 가게의 정보를 확인할 수 있다.
  - 가게 이름, 주소, 사진, 리뷰	1. 꽃 가게를 하나 선택하면 해당 가게 페이지로 이동한다.

3. 가게의 정보를 확인한다. 가게 위치의 경우 지도 버튼을 누르면 네이버 지도로 연결한다.	

2. 가게 정보를 DB에서 조회한다.
소비자	트렌드	꽃 트렌드 조회	- 꽃의 최신 트렌드를 확인할 수 있다.	1. 트렌드 페이지로 이동한다.	
2. 꽃 트렌드를 조회한다.
2-1. 초기에는 양재 꽃시장 판매량 높은 순으로, 추후 데이터가 쌓이면 DB에서 많이 사용된 순으로 트렌드 판단
소비자	꽃말	꽃말 조회	- 꽃에 대한 정보를 확인할 수 있다.	1. 꽃 정보 페이지로 이동한다.	
2. 꽃 정보를 DB에서 조회한다. (꽃 사진, 이름, 꽃말 등)
